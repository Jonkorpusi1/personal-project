<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pokémon — Alle Generationen</title>
  <style>
    :root{
      --bg:#0f1724; --glass: rgba(255,255,255,0.04);
      --muted:#94a3b8;
      --gap:1rem;
      font-family: Inter, sans-serif;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#071027);color:#e6eef8;min-height:100vh}
    header{padding:1.5rem; display:flex; flex-wrap:wrap; align-items:center; gap:1rem;}
    h1{margin:0; font-size:1.5rem;}
    .controls{margin-left:auto; display:flex; gap:.75rem; align-items:center;}
    .search{padding:.5rem .75rem; border-radius:10px; border:1px solid rgba(255,255,255,0.04); background:var(--glass); color:inherit; min-width:200px;}
    .filter{padding:.45rem .6rem; border-radius:10px; border:1px solid rgba(255,255,255,0.06); background:transparent; color:var(--muted); cursor:pointer;}
    main{padding:1rem;}
    .grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(180px,1fr)); gap:var(--gap);}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:14px; padding:12px; border:1px solid rgba(255,255,255,0.03); box-shadow:0 6px 18px rgba(2,6,23,0.6); display:flex; gap:.75rem; align-items:center;}
    .thumb{width:64px; height:64px; border-radius:12px; background:#071025; display:flex; align-items:center; justify-content:center; color:var(--muted); overflow:hidden;}
    .thumb img{width:100%; height:100%; object-fit:contain;}
    .meta{flex:1;}
    .name{margin:0; font-weight:700; font-size:1rem;}
    .sub{color:var(--muted); font-size:.85rem; margin-top:4px;}
    .badge{padding:.2rem .45rem; border-radius:999px; font-size:.75rem; background:rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.03);}
    footer{padding:1rem; text-align:center; color:var(--muted);}
    @media (max-width:640px){
      header{flex-direction:column; align-items:flex-start;}
      .controls{margin-left:0; width:100%;}
      .search{width:100%;}
    }
  </style>
</head>
<body>
  <header>
    <h1>Pokémon — Alle Generationen</h1>
    <div class="controls">
      <input id="search" class="search" placeholder="Suche Name oder Typ..." />
      <select id="filter" class="filter" title="Filter: alle / Generation">
        <option value="all">Alle</option>
        <!-- optional: filter auf bestimmte Generationen -->
      </select>
    </div>
  </header>

  <main>
    <section id="list" class="grid" aria-live="polite">
      <p style="grid-column:1/-1; text-align:center; color:var(--muted)">Lade Pokémon …</p>
    </section>
  </main>

  <footer>
    <small>Geladen via PokéAPI</small>
  </footer>

  <script>
    const listEl = document.getElementById('list');
    const searchEl = document.getElementById('search');
    const filterEl = document.getElementById('filter');

    let allPokemons = [];  // Hier speichern wir alle geladenen Pokémon

    async function fetchAllPokemon() {
      try {
        // Hol dir die Gesamtzahl und URLs
        const resp = await fetch('https://pokeapi.co/api/v2/pokemon?limit=2000'); // großer Limit-Wert  
        const data = await resp.json();
        const results = data.results; // Array mit {name, url}
        // Für jedes Pokémon detailierte Daten laden
        const promises = results.map(r => fetch(r.url).then(r2 => r2.json()));
        const detailed = await Promise.all(promises);
        // Mappe auf ein einfacheres Format
        allPokemons = detailed.map(p => ({
          id: p.id,
          name: p.name,
          types: p.types.map(t => t.type.name),
          img: p.sprites.front_default // kann angepasst werden
        }));
        render();  // danach ausgeben
      } catch (err) {
        console.error('Fehler beim Laden der Pokémon:', err);
        listEl.innerHTML = '<p style="grid-column:1/-1;color:var(--muted)">Fehler beim Laden der Daten.</p>';
      }
    }

    function render() {
      const q = searchEl.value.trim().toLowerCase();
      listEl.innerHTML = '';
      const visible = allPokemons.filter(p => {
        if (q) {
          if (p.name.toLowerCase().includes(q)) return true;
          if (p.types.some(t => t.toLowerCase().includes(q))) return true;
          if (String(p.id).includes(q)) return true;
          return false;
        }
        return true;
      });
      if (visible.length === 0) {
        listEl.innerHTML = '<p style="grid-column:1/-1;color:var(--muted)">Keine Pokémon gefunden.</p>';
        return;
      }
      for (const p of visible) {
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = `
          <div class="thumb">
            ${p.img
              ? `<img src="${p.img}" alt="${p.name} Sprite">`
              : '–'}
          </div>
          <div class="meta">
            <div style="display:flex;justify-content:space-between;align-items:center;">
              <h3 class="name">${p.name.charAt(0).toUpperCase() + p.name.slice(1)}</h3>
              <div class="badge">#${p.id}</div>
            </div>
            <div class="sub">${p.types.join(' • ')}</div>
          </div>
        `;
        listEl.appendChild(card);
      }
    }

    searchEl.addEventListener('input', () => render());

    // Start laden
    fetchAllPokemon();
  </script>
</body>
</html>
